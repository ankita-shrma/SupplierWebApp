var sapp=angular.module('suppliermod',['angularUtils.directives.dirPagination','ui.router'])
               .config(function($stateProvider)
                          { 
                           $stateProvider.caseInsensitiveMatch=true;
                             $stateProvider
                              .state('myaccount',{
                                url:'/myaccount',
                              templateUrl:'myaccount.html',
                              controller:'myaccountcont'
                           })
                             $stateProvider
                              .state('supplier',{
                                url:'/supplier',
                              templateUrl:'supplier.html',
                              controller:'suppliercont'
                           })
                             $stateProvider
                              .state('dealer-details',{
                                url:'/dealer-details',
                              templateUrl:'dealer-details.html',
                                 controller:'suppliercont' 
                           });
               })
                       .controller('suppliercont',function($scope,$http)
                          {/*var product1={};
                           $scope.product1=product1;*/
                          var productlist=[{}];
                              $scope.productlist=productlist;
                                $scope.idd;          
                              $scope.editable=false;
                             var flag=true;
                           $scope.products;
                      /*    $scope.saverow=function()*/
                        /*  {*/  /* $scope.productlist.push($scope.product);
                                 $scope.productlist[$scope.productlist.length-1].tqty=$scope.tqty;
                                 $scope.productlist[$scope.productlist.length-1].aqty=$scope.aqty;
                                 $scope.productlist[$scope.productlist.length-1].lavail=$scope.lavail;
                                 $scope.productlist[$scope.productlist.length-1].fprice=$scope.fprice;
                               $scope.productlist[$scope.productlist.length-1].date=$scope.date;
                               $scope.productlist[$scope.productlist.length-1].agent=$scope.agent;*/
                             /* console.log($scope.productlist);
                              $scope.product1.productlist1=$scope.productlist;*/
                            /*  console.log($scope.product1.date);*/
                          /*   localStorage.ldata=JSON.stringify($scope.product1);
				             
				                console.log(localStorage.ldata);
				                $scope.fetchtask();
                                 $scope.editable=true;
				 }
				 $scope.fetchtask=function(){*/
				//var fdata=JSON.parse(localStorage.ldata);
					 /*$scope.product1=JSON.parse(localStorage.ldata);
               $scope.productlist=$scope.product1.productlist1;*/
				  //console.log(fdata);
					 
				/* }
                          */
                      $scope.saverow=function()
                      { 
                         idd=$scope.productlist.length-1;
                         $scope.productlist.forEach(function(elem,index)
										 { 
                                         if(($scope.productlist[idd].item==elem.item)&&($scope.productlist[idd].gtype==elem.gtype)&&($scope.productlist[idd].date==elem.date))
                                         { if(index!=idd)
                                           {alert("please enter unique value of combination of item+gtype+date");
                                             flag=false;
                                             }
                                           else
                                            if(flag)
                                           { 
                                             $scope.productlist[idd].stock_id=$scope.productlist[idd].item+$scope.productlist[idd].gtype+$scope.productlist[idd].date;
                                             console.log($scope.productlist);
                                           $scope.editable=true;
                                   localStorage.ldata=JSON.stringify($scope.productlist);
                                    console.log(localStorage.ldata);
                                  $scope.fetchtask();
                                }
                                               
                                         }
                                           else
                                           { $scope.productlist[idd].stock_id=$scope.productlist[idd].item+$scope.productlist[idd].gtype+$scope.productlist[idd].date;
                                            console.log($scope.productlist);
                                           $scope.editable=true;
                                   localStorage.ldata=JSON.stringify($scope.productlist);
                                    console.log(localStorage.ldata);
                                  $scope.fetchtask();
                        
                                           }
                                         
                              });
                    
                      }
                      $scope.fetchtask=function()
                      {$scope.productlist=JSON.parse(localStorage.ldata);
                       console.log(localStorage.ldata);
                      }
                        $scope.addrow=function()
                          {   
                            $scope.productlist.push({item:'',gtype:'',tqty:'',aqty:'',lavail:'',fprice:'',agent:''});
                              $scope.editable=false;
                          }
                        
                         $scope.deleterow=function(id)
                          {$scope.productlist.forEach(function(elem,index)
										 {
		                                  if(index==id)
					                      {$scope.productlist.splice(index,1);
				                            }
				                         });
                            localStorage.ldata=JSON.stringify($scope.productlist);
                           /*
                             $scope.product1.productlist1=productlist;
                             localStorage.ldata=JSON.stringify($scope.product1);
				             */
                              
                          }
                          $scope.editdata=function(id)
                          {$scope.productlist.forEach(function(elem,index)
										 {
		                                  if(index==id)
                                              {$scope.editable=false;}
                              });
                           
                          }
                          $scope.statusobj={};
                          $scope.getproduct=function(p,s)
                          {$scope.products=p;
                           $scope.statusobj=s;
                              
                          }
                         $scope.saveproduct=function()
                          {$scope.productlist.p=$scope.products;
                            localStorage.ldata=JSON.stringify($scope.productlist);
                           $scope
                            }
                          $scope.statusdata;
                          $scope.statusdata=$http.get('status.json')
                                              .then(function(response)
                                                   { $scope.statusdata=response.data;});
                          /* $scope.combinearray=$scope.productlist.map(function(value,index)
                                                                    {return{ 
                                                                             data:value,
                                                                             value:$scope.statusdata[index]
                                                                        
                                                                            }
                               
                                                                     });*/
                           
                          
               })
                  .controller('myaccountcont',function($scope,$http)
                             {/*detail={name:'ankita',
                                      address:'2/10 p&t colony pusa road,new delhi-110005',
                                      mobno:9013335930,
                                      rank:23,
                                      dealsin:'deal'
                                     }
                                   $scope.detail=$http.get('details.json')
                                              .then(function(response)
                                                   { $scope.detail=response.data;})*/
                              $scope.getdetail=function()
                              {  $scope.detail=$http.get('details.json')
                                              .then(function(response)
                                                   { $scope.detail=response.data;});
                              /* $scope.detail=detail;*/   
                              }
                            
                                   
                            
                      
                             });





































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































